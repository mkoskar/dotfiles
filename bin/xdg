#!/usr/bin/env bash

set -eu

prgname=${0##*/}

dirs=(
    "${XDG_CACHE_HOME:-$HOME/.cache}"
    "${XDG_CONFIG_HOME:-$HOME/.config}"
    "${XDG_DATA_HOME:-$HOME/.local/share}"
    "${XDG_STATE_HOME:-$HOME/.local/state}"
)

name=$1
for dir in "${dirs[@]}"; do
    path=$dir/$name
    if [[ $path = *$'\n'* ]]; then
        printf '%s: %q skipped (contains NL)\n' "$prgname" "$path" >&2
        continue
    fi
    printf '> %s\n' "$path" >&2
    [[ -e $path ]] || continue
    printf '%s\n' "$path"
done
